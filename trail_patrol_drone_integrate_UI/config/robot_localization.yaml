### ekf config file for 3D drone navigation ###
robot_localization:
    ros__parameters:
        frequency: 30.0
        two_d_mode: false              # CRITICAL: Enable 3D mode for drone
        publish_acceleration: false
        publish_tf: true
        map_frame: map
        odom_frame: odom
        base_link_frame: base_link
        world_frame: odom

        # Odometry sensor configuration
        odom0: /odom
        odom0_config: [true,  true,  true,     # x, y, z position - USE ALL
                      false, false, true,     # roll, pitch, yaw - use yaw only
                      true,  true,  true,     # vx, vy, vz velocity - USE ALL
                      false, false, true,     # wx, wy, wz angular velocity - use yaw rate
                      false, false, false]    # ax, ay, az acceleration - skip

        # IMU sensor configuration  
        imu0: /imu
        imu0_config: [false, false, false,     # x, y, z position - don't use
                      true,  true,  true,      # roll, pitch, yaw - USE ALL for attitude
                      false, false, false,     # vx, vy, vz velocity - don't use
                      true,  true,  true,      # wx, wy, wz angular velocity - USE ALL
                      false, false, false]     # ax, ay, az acceleration - could add later

        # Process noise covariance (Q matrix)
        # Higher values = trust process model less, trust sensors more
        process_noise_covariance: [0.05,    0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.05,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.06,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.03,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.03,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.06,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.025,  0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.025,  0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.04,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.01,   0.0,      0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.01,   0.0,      0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.02,   0.0,      0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.01,   0.0,      0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.01,   0.0,
                                   0.0,       0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.015]

        # Initial estimate error covariance (P0)
        initial_estimate_covariance: [1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,      0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9,   0.0,
                                      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      0.0,      1e-9]